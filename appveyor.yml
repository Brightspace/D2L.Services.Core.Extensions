version: 2.0.0.{build}

image: Visual Studio 2017

configuration: Release
platform: Any CPU

before_build:
  - dotnet restore

build_script:
  - dotnet build

after_build:
  - dotnet pack src\D2L.Services.Core.Extensions\D2L.Services.Core.Extensions.csproj

test_script:
  - dotnet test test\D2L.Services.Core.Extensions.UnitTests\D2L.Services.Core.Extensions.UnitTests.csproj

dotnet_csproj:
  patch: true
  file: src\**\*.csproj
  version: '{version}'

artifacts:
  - path: src\**\*.nupkg
    name: NuGet
